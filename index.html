<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CS171 - Final Project</title>

    <!-- Load Google Font -->
    <link href='https://fonts.googleapis.com/css?family=Roboto:100,400,300,400italic,700' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/colorbrewer.css">
    <link rel="stylesheet" href="css/nouislider.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/jquery.fullpage.min.css">

</head>
<body>

    <!--<div class="container-fluid">-->
    <div id="fullpage">

        <!--<ul id="menu">-->
            <!--<li data-menuanchor="s0"><a href="#section0">Top</a></li>-->
            <!--<li data-menuanchor="s1"><a href="#section1">Introduction</a></li>-->
            <!--<li data-menuanchor="s2"><a href="#section2">Airbnb in NYC</a></li>-->
            <!--<li data-menuanchor="s3"><a href="#section3">Taxes 1</a></li>-->
            <!--<li data-menuanchor="s4"><a href="#section4">Taxes 2</a></li>-->
            <!--<li data-menuanchor="s5"><a href="#section5">Illegal Listings</a></li>-->
            <!--<li data-menuanchor="s6"><a href="#section6">Housing Prices</a></li>-->
            <!--<li data-menuanchor="s7"><a href="#section7">Conclusion</a></li>-->
        <!--</ul>-->

        <div id="section0" data-anchor="s0" class="section">
            <!--<img src="img/header-image-6.png" width="100%">-->
        </div>

        <div id="section1" data-anchor="s1" class="section">
            <h1>Airbnb in NYC: The Controversy</h1>
            <p>In October 2016, the governor of New York signed a bill into law that is predicted to severely restrict Airbnb in New York City. The controversial law is the latest move in a series of increasingly contentious conflicts between Airbnb, New York City, and the hotel industry. New York lawmakers argue that many Airbnb listings violate the Multiple Dwelling law, passed in 2011. They claim that commercial operators essentially run illegal hotels using Airbnb, which drive up rental costs for NYC residents by limiting available housing units. This also decreases demand for legal hotels, and reduces the city’s hotel tax revenue.</p>
            <p>The new law prohibits advertising listings that are illegal under the Multiple Dwelling law, which mostly means short-term rentals available for less than 30 days. Violators can be fined up to $7,500. Airbnb claims that the law is unconstitutional, and violates free speech rights. They argue that their service helps middle class families trying to make extra money. The new law could lead to a drop in listings in New York City, its biggest market in the US.</p>
            <p><strong>What is Airbnb’s true impact on the city? Use this page to explore the data.</strong></p>
            <div id="timeline"></div>
        </div>

        <div id="section2" data-anchor="s2" class="section">
            <h2>So what's actually going on with Airbnb in New York?</h2>
            <p>Use this visualization to explore changes in Airbnb listings in New York over time.</p>

            <div class="row">
                <div class="col-md-8">
                    <div class="user-control" onchange="zoom()">
                        <p>Zoom Into Borough: </p>
                        <select id="borough_sel" class="form-control">
                            <option value="all">All</option>
                            <option value="Bronx">Bronx</option>
                            <option value="Manhattan">Manhattan</option>
                            <option value="Queens">Queens</option>
                            <option value="Brooklyn">Brooklyn</option>
                            <option value="Staten Island">Staten Island</option>
                        </select>
                    </div>
                    <div id="vis1">
                        <div id="airbnb-map"></div>
                    </div>
                    <div><h3>Number of Listings: <span id="listing-count"></span> </h3></div>
                    <div class="row">
                        <div id="field" class="col-sm-1 slider-field"> </div>
                        <div id="slider" class="col-sm-4"> </div>
                        <div id="sel-date" class="col-sm-4"></div>
                        <div class="col-sm-2"> <button id="slider-submit-button" type="button">Update Map</button>  </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="user-control" onchange="dataManipulation()">
                        <p>Color Listings by: </p>
                        <select id="type" class="form-control">
                            <option value="None">None</option>
                            <option value="illegal">Legality</option>
                            <option value="price">Price</option>
                        </select>
                    </div>
                    <div id="areachart"></div>
                    <div id="linechart"></div>
                </div>
            </div>
        </div>

        <div id="section3" data-anchor="s3" class="section">
            <h2>Airbnb is facing controversy across the country over hotel taxes.</h2>
            <p>Airbnb could owe up to $200 million dollars in hotel taxes across the country. Airbnb hosts are supposed to be paying these taxes on their own, but many don’t. As of 2016, in a move to increase its legitimacy and strengthen its position for other legal battles, Airbnb has agreed to collect taxes on behalf of hosts for over 200 cities around the world. The most visible tax battle to date has been between Airbnb and San Francisco, where Airbnb had been operating without paying the 14% tax the city levies on hotels. In February 2015, Airbnb agreed to pay millions of dollars in back taxes. In October, as San Francisco was preparing to vote on a proposition to restrict Airbnb, the company ran a series of advertisements that fell flat with SF residents, who viewed them as the company bragging about doing its civic duty.</p>

            <div class="row">
                <div class="span12">
                    <div class="well">
                        <div id="myCarousel" class="carousel fdi-Carousel slide">
                            <!-- Carousel items -->
                            <div class="carousel fdi-Carousel slide" id="eventCarousel" data-interval="0">
                                <div class="carousel-inner onebyone-carosel">
                                    <div class="item active">
                                        <div class="col-md-4">
                                            <a href="#"><img src="img/art-schools.jpg" class="img-responsive center-block"></a>
                                            <div class="text-center">1</div>
                                        </div>
                                    </div>
                                    <div class="item">
                                        <div class="col-md-4">
                                            <a href="#"><img src="img/bike-lane.jpg" class="img-responsive center-block"></a>
                                            <div class="text-center">2</div>
                                        </div>
                                    </div>
                                    <div class="item">
                                        <div class="col-md-4">
                                            <a href="#"><img src="img/library.jpg" class="img-responsive center-block"></a>
                                            <div class="text-center">3</div>
                                        </div>
                                    </div>
                                    <div class="item">
                                        <div class="col-md-4">
                                            <a href="#"><img src="img/escalator.jpg" class="img-responsive center-block"></a>
                                            <div class="text-center">4</div>
                                        </div>
                                    </div>
                                    <div class="item">
                                        <div class="col-md-4">
                                            <a href="#"><img src="img/parking-meters.jpg" class="img-responsive center-block"></a>
                                            <div class="text-center">5</div>
                                        </div>
                                    </div>
                                    <div class="item">
                                        <div class="col-md-4">
                                            <a href="#"><img src="img/charging-station.jpg" class="img-responsive center-block"></a>
                                            <div class="text-center">6</div>
                                        </div>
                                    </div>
                                </div>
                                <a class="left carousel-control" href="#eventCarousel" role="button" data-slide="prev">
                                    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                                    <span class="sr-only">Previous</span>
                                </a>
                                <a class="right carousel-control" href="#eventCarousel" role="button" data-slide="next">
                                    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                                    <span class="sr-only">Next</span>
                                </a>
                            </div>
                            <!--/carousel-inner-->
                        </div><!--/myCarousel-->
                    </div><!--/well-->
                </div>
            </div>

        </div>

        <div id="section4" data-anchor="s4" class="section">
            <h2>New York City and State lose $X in unpaid taxes.</h2>
            <p>Under current laws, Airbnb is not permitted to collect and remit taxes to New York City. New York city and state lawmakers, and well as the New York hotel association, oppose Airbnb’s attempt to be allowed to do so. They fear legitimizing Airbnb’s operations when a large proportion of their listings are illegal, and argue that such an action would put hosts at risk by providing evidence of their illegal activity, and doesn’t address the issue of housing shortages. If Airbnb illegal listings are reducing demand for legal hotels in New York City, then the city is also losing tax revenues that would be paid on legal hotel rooms.</p>

            <div id="vis2">
                <div class="row">
                    <div class="col-md-7"></div>
                    <div class="col-md-3">
                        <form class="form-inline">
                            <div class="form-group">
                                <label for="budgetUnit">City or State</label>
                                <select class="form-control" id="budgetUnit" onChange="taxRevenue.changeData()">
                                    <option value="city">New York City</option>
                                    <option value="state">New York State</option>
                                </select>
                            </div>
                        </form>
                    </div>
                    <div class="col-md-2">
                        <form class="form-inline">
                            <div class="form-group">
                                <label for="budgetYear">Fiscal Year</label>
                                <select class="form-control" id="budgetYear" onChange="taxRevenue.changeData()">
                                    <option value="2014">2014</option>
                                    <option value="2015">2015</option>
                                    <option value="2016">2016</option>
                                </select>
                            </div>
                        </form>
                    </div>
                </div>
                <div id="tax-revenue"></div>
            </div>
        </div>

        <div id="section5" data-anchor="s5" class="section">
            <h2>Many Airbnb listings in NYC are illegal</h2>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas pellentesque nibh velit, id pretium lacus lobortis et. Curabitur augue dolor, dignissim quis metus a, vehicula ultricies nulla. Aenean ornare luctus lectus, vel gravida magna tincidunt sed. Morbi consequat leo a tempus molestie. Etiam aliquam lorem a enim semper bibendum. Duis elementum consectetur ex, nec mollis ipsum lacinia ut. Curabitur et leo a risus ullamcorper elementum. Cras pharetra nec sapien quis volutpat. Nullam bibendum porttitor lorem vitae accumsan. Integer ornare in risus dapibus iaculis. Praesent pellentesque ante nec malesuada sagittis. Donec consequat placerat turpis eu posuere. Duis in mauris cursus, pulvinar lorem non, dapibus ex. Quisque viverra metus sem, tincidunt congue arcu scelerisque eu.</p>
            <p>Morbi ullamcorper nisi vel orci accumsan elementum. Fusce at nisi pellentesque, commodo magna id, tempor libero. Aenean sem odio, congue vitae nulla ut, sagittis maximus felis. Nunc pellentesque fermentum est, in porttitor lectus iaculis ut. Vestibulum mattis lacus lectus, id varius ipsum faucibus quis. Nullam eget dignissim lorem, sed sagittis quam. Etiam finibus, eros quis dictum fringilla, dui urna consectetur magna, et congue urna nibh in leo. Vestibulum varius felis at consequat sagittis. Vestibulum a vulputate ex. Phasellus ut nunc nunc. Praesent iaculis porttitor lobortis. Cras vestibulum.</p>
            <div id="sankey"></div>
            <div id="sankey2"><!--<img src="http://placehold.it/900x500?text=Vis+3:+Illegal+Listings Sankey" class="center">--></div>
        </div>

        <div id="section6" data-anchor="s6" class="section">
            <h2>These illegal listings may be driving up long-term housing prices.</h2>
            <div id="vis4">
                <div id="borough-checkboxes">
                    <input type="checkbox" id="select_all" value="all" checked="checked"/> Selecct All
                    <input class="checkbox-inline" type="checkbox" value="Bronx" checked="checked"/>Bronx
                    <input class="checkbox-inline" type="checkbox" value="Brooklyn" checked="checked"/>Brooklyn
                    <input class="checkbox-inline" type="checkbox" value="Manhattan" checked="checked"/>Manhattan
                    <input class="checkbox-inline" type="checkbox" value="Queens" checked="checked"/>Queens
                    <input class="checkbox-inline" type="checkbox" value="Staten Island" checked="checked"/>Staten Island
                </div>
                <div id="neighborhood-line-chart-area" class="col-sm-10"></div>
                <div class="col-sm-2">
                    <div class="row">
                        <form id="neighborhood-line-data-type">
                            <label>Data to display (y-axis):</label>
                            <div class="btn-group" data-toggle="buttons">
                                <label class="btn btn-primary active">
                                    <input type="radio" name="options" value="abs_price" autocomplete="off" checked> Price
                                </label>
                                <label class="btn btn-primary">
                                    <input type="radio" name="options" value="percent_change" autocomplete="off"> Percent Change
                                </label>
                            </div>
                        </form>
                        <form id="neighborhood-line-color-type">
                            <label>Data to display (y-axis):</label>
                            <div class="btn-group" data-toggle="buttons">
                                <label class="btn btn-primary active">
                                    <input type="radio" name="options" value="percent_illegal" autocomplete="off" checked> Percent Illegal
                                </label>
                                <label class="btn btn-primary">
                                    <input type="radio" name="options" value="proportion_of_posts" autocomplete="off"> Posting Density
                                </label>
                                <label class="btn btn-primary">
                                    <input type="radio" name="options" value="proportion_of_illegal_posts" id="option2" autocomplete="off"> Illegal Posting Density
                                </label>
                            </div>
                        </form>
                    </div>
                    <div class="row" id="neighborhood-line-legend"> </div>

                </div>
            </div>
        </div>


        <div id="section7" data-anchor="s7" class="section">
            <h2>Some concluding thoughts</h2>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas pellentesque nibh velit, id pretium lacus lobortis et. Curabitur augue dolor, dignissim quis metus a, vehicula ultricies nulla. Aenean ornare luctus lectus, vel gravida magna tincidunt sed. Morbi consequat leo a tempus molestie. Etiam aliquam lorem a enim semper bibendum. Duis elementum consectetur ex, nec mollis ipsum lacinia ut. Curabitur et leo a risus ullamcorper elementum. Cras pharetra nec sapien quis volutpat. Nullam bibendum porttitor lorem vitae accumsan. Integer ornare in risus dapibus iaculis. Praesent pellentesque ante nec malesuada sagittis. Donec consequat placerat turpis eu posuere. Duis in mauris cursus, pulvinar lorem non, dapibus ex. Quisque viverra metus sem, tincidunt congue arcu scelerisque eu.</p>
        </div>

        <!--<nav class="site-navigation horizontal-page-navigation">-->
            <!--<ul class="menu">-->
                <!--<li><a href="#top">Top</a></li>-->
                <!--<li><a href="#section1">Introduction</a></li>-->
                <!--<li><a href="#section2">Airbnb in NYC</a></li>-->
                <!--<li><a href="#section3">Taxes 1</a></li>-->
                <!--<li><a href="#section4">Taxes 2</a></li>-->
                <!--<li><a href="#section5">Illegal Listings</a></li>-->
                <!--<li><a href="#section6">Housing Prices</a></li>-->
                <!--<li><a href="#section7">Conclusion</a></li>-->
            <!--</ul>-->
        <!--</nav>-->

    </div>
    <!--</div>-->

    <!-- Load JS libraries -->
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/d3.min.js"></script>
    <script src="js/topojson.v1.min.js"></script>
    <script src="js/queue.v1.min.js"></script>
    <script src="js/jquery.combinedScroll.js"></script>
    <script src="js/queue.min.js"></script>
    <script src="js/sankey.js"></script>
    <script src="js/d3.tip.js"></script>
    <script src="js/colorbrewer.min.js"></script>
    <script src="js/jquery.easings.min.js"></script>
    <script type="text/javascript" src="js/jquery.fullpage.min.js"></script>

    <!--<script type="text/javascript">-->
        <!--jQuery(document).ready(function() {-->

            <!--// Hook up the current state to the nav bar-->
            <!--$('.horizontal-page-navigation').onePageNav();-->

        <!--});-->
    <!--</script>-->

    <script type="text/javascript">
        $(document).ready(function () {
            $('#myCarousel').carousel({
                interval: 10000
            })
            $('.fdi-Carousel .item').each(function () {
                var next = $(this).next();
                if (!next.length) {
                    next = $(this).siblings(':first');
            }
            next.children(':first-child').clone().appendTo($(this));

                if (next.next().length > 0) {
                    next.next().children(':first-child').clone().appendTo($(this));
                }
                else {
                    $(this).siblings(':first').children(':first-child').clone().appendTo($(this));
                }
            });
        });
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            $('#fullpage').fullpage({
                menu: false,
                lockAnchors: false,
                anchors:['s0', 's1', 's2', 's3', 's4', 's5', 's6', 's7'],
                navigation: true,
                navigationPosition: 'left',
                slidesNavigation: true,
                slidesNavPosition: 'bottom',

                //Scrolling
                css3: true,
                scrollingSpeed: 700,
                autoScrolling: true,
                fitToSection: true,
                fitToSectionDelay: 1000,
                scrollBar: false,
                easing: 'easeInOutCubic',
                easingcss3: 'ease',
                loopBottom: false,
                loopTop: false,
                loopHorizontal: true,
                continuousVertical: false,
                continuousHorizontal: false,
                scrollHorizontally: false,
                interlockedSlides: false,
                dragAndMove: false,
                offsetSections: false,
                resetSliders: false,
                fadingEffect: false,
                normalScrollElements: '#element1, .element2',
                scrollOverflow: false,
                scrollOverflowOptions: null,
                touchSensitivity: 15,
                normalScrollElementTouchThreshold: 5,
                bigSectionsDestination: null,

                //Accessibility
                keyboardScrolling: true,
                animateAnchor: true,
                recordHistory: true,

                //Design
                controlArrows: false,
                verticalCentered: true,
                paddingTop: '3em',
                paddingBottom: '10px',
                fixedElements: '#header, .footer',
                responsiveWidth: 0,
                responsiveHeight: 0,
                responsiveSlides: false,

                //Custom selectors
                sectionSelector: '.section',
                slideSelector: '.demo',

                //events
                onLeave: function(index, nextIndex, direction){},
                afterLoad: function(anchorLink, index){},
                afterRender: function(){},
                afterResize: function(){},
                afterResponsive: function(isResponsive){},
                afterSlideLoad: function(anchorLink, index, slideAnchor, slideIndex){},
                onSlideLeave: function(anchorLink, index, slideIndex, direction, nextSlideIndex){}
            });
        });
    </script>

    <!-- Visualization objects -->
    <script src="js/airbnbMap.js"></script>
    <script src="js/illegal_sankey.js"></script>
    <script src="js/custom-sankey.js"></script>
    <script src="js/taxRevenue.js"></script>
    <script src="js/housingPrices.js"></script>
    <script src="js/airbnbNodeMap.js"></script>
    <script src="js/nouislider.js"></script>
    <script src="js/timeline.js"></script>
    <script src="js/neighborhood_rent.js"></script>

    <!-- Load data, create visualizations -->
    <script src="js/main.js"></script>
</body>
</html>